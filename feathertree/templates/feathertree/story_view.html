{% extends "feathertree/base.html" %}

{% load static %}
{% block extra_scripts %}
    <script src="{% static 'story_tree.js' %}?v={{ STATIC_VERSION }}"></script>
{% endblock %}

{% block head %}
<title>Feathertree â‹… {{ story.title|default:"Untitled Story" }}</title>
<meta name="description" content="Read branching chapters from {{ story.title }} on Feathertree.">
{% endblock head %}

{% block body %}
{% include "feathertree/_header.html" %}

<main class="container content story-page">
  <article class="stack">
    <header class="chapter-header section-block">
      <h2 class="story-title">{{ story.title }}</h2>
      <p class="story-meta">
        {% if story.last_updated %}
          <span>Updated {{ story.last_updated|date:"F j, Y" }}</span>
        {% endif %}
      </p>
    </header>

    <section class="branching-section">
      <h3>Chapters</h3>
      {% if chapter_tree %}
        <div class="chapter-tree-wrapper">
          {% include "feathertree/_chapter_tree.html" with nodes=chapter_tree level=0 %}
        </div>
      {% else %}
        <p><em>No chapters yet.</em></p>
      {% endif %}
    </section>
  </article>
</main>
{% endblock body %}